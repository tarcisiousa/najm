{% extends 'base.html' %}

{% block content %}

<div class="p-4 sm:ml-48">
   <div class=" border-2 border-blue-800 rounded-lg mt-14 mb-10" style="min-height: 80vh;">
      <div class="flex bg-gradient-to-r from-orange-500 to-orange-300 items-center drop-shadow-lg text-gray-500 rounded-lg m-2">
           <div class="bg-blue-600 border-blue-600 border-4 h-full py-8 px-2 rounded-l-lg ">
           </div>
           <div>
               <label class="w-full block ml-3 mb-3 mt-3 text-4xl font-medium text-white font-medium ">Atualização do Processo</label>
           </div>
      </div>
       {% if note_waring %}
       <div class="ml-2 mr-2 mt-2 mb-4">
            <button type="button" class="w-full flex items-center bg-red-600 hover:bg-red-500 text-white text-sm font-bold px-2 py-2 rounded-md mt-4 animate-pulse" role="alert" onclick="toggleModalNotesInfo()">
                <svg class="fill-current w-6 h-6 mr-2 text-orange-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                    <path d="M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z"/>
                </svg>
                <p>Existem alertas para esse processo.</p>
            </button>
       </div>
       {%endif%}
      <div class=" mr-2 mt-2 mb-3 rounded-lg ">
         <form method="POST" action="{% url 'processes_update' pk=object.pk %}" enctype="multipart/form-data" class="m-2 w-full">
           {% csrf_token %}
           <!-- <label for="website-admin" class="w-full block mb-1 text-sm font-medium text-blue-800">Nome</label> -->
            <div class="mr-2 ">
                <div class="flex w-full rounded-lg">
                    <span class="w-full inline-flex items-center px-3 py-1 text-sm text-gray-500 border-b-2 border-gray-500">
                      <label class="font-bold">* Preencha os dados do Processo:</label>
                    </span>
                </div>
                <div class="w-full  mt-2 flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">DATA DE ATENDIMENTO:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">
                            <!-- Campo visível somente leitura -->
                            <input class="w-full h-6 px-2 border-1 rounded-md" value="{{ form.date_at.value }}" readonly>
                            <!-- Campo oculto que envia o valor de volta no POST -->
                            <input type="hidden" name="date_at" value="{{ form.date_at.value|date:'Y-m-d' }}">
                        </div>
                    </div>
                </div>
                <div class="w-full  mt-2 flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Advogado(a):</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{form.id_advocate}}</div>
                    </div>
                </div>
                <div class="w-full  mt-2 flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Requerente:</label>
                        </span>
                        {% if object.id_responsible %}
                        <span class="w-full h-6 ml-2 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Responsável:</label>
                        </span>
                        {%endif%}
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{form.id_assisted}}</div>
                        {% if object.id_responsible %}
                        <div class="w-full h-6 ml-2">{{form.id_responsible}}</div>
                        {%endif%}
                    </div>
                </div>
                <div class="w-full  mt-2 flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Requerido:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        {% if object.id_required != None %}
                            <div class="w-full h-6 border-2 border-slate-200 rounded-md px-2 flex items-center">{{object.id_required}}</div>
                        {%else%}
                            <div class="w-full h-6 border-2 border-slate-200 rounded-md px-2 flex items-center">Necessário adicionar o requerido...</div>
                        {%endif%}
                        <button type="button" class="font-md rounded-md bg-blue-800 hover:bg-blue-600 text-white hover:text-gray-200 font-bold btn px-4 py-1 ml-2 mr-2" onclick="toggleModal()">
                            Adicionar
                        </button>
                    </div>
                </div>
                <div class="w-full  mt-2 flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Fatos / Narrativa:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{form.facts}}</div>
                    </div>
                </div>
                <div class="w-full  mt-48 flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Número do processo:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Jurisdição:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{form.number_process}}</div>
                        <div class="w-full h-6 ml-2">{{form.jurisdiction}}</div>
                    </div>
                </div>
                <div class="w-full mt-2 flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Matéria:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                            <label class="text-slate-600 font-bold">Classe Judicial:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                            <label class="text-slate-600 font-bold">Assunto:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">
                            <select id="select-category" name="category" class="w-full h-6 px-2 border-1 rounded-md">
                                {% if object.processes_matter == None %}
                                    <option value="">Selecione a Matéria</option>
                                    {% for category in categories %}
                                        <option value="{{ category }}">{{ category }}</option>
                                    {% endfor %}
                                {% else %}
                                    <option value="">{{ object.processes_matter }}</option>
                                    {% for category in categories %}
                                        <option value="{{ category }}">{{ category }}</option>
                                    {% endfor %}
                                {% endif %}
                            </select>
                            </div>

                            <div class="w-full h-6">
                            <select id="select-subcategory" name="subcategory" class="w-full h-6 ml-1 px-2 border-1 rounded-md">
                                {% if object.processes_classs == None %}
                                    <option value="">Selecione Classe</option>
                                {% else %}
                                    <option value="">{{ object.processes_classs }}</option>
                                {% endif %}
                            </select>
                            </div>

                            <div class="w-full h-6">
                            <select id="select-subcategory2" name="action" class="w-full h-6 ml-1 px-2 border-1 rounded-md">
                                <option value="">Selecione Ação</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="w-full  mt-2 mb-4 flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Fases:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{form.phase}}</div>
                    </div>
                </div>
            </div>
            <div class="border-t-2 border-slate-400 mt-2 mr-2">
                <a href="{% url 'processes_update_documents_process' pk=object.pk %}" class="w-60 m-2flex justify-center rounded-md bg-slate-500 hover:bg-slate-600 text-white hover:text-gray-200 font-bold btn px-2 ml-2 mr-2 transition-transform duration-300 hover:scale-105">
                    <span class="w-full flex items-center px-2 text-sm text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                          <path d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625Z" />
                          <path d="M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z" />
                        </svg>
                        <div class="flex justify-center w-full inline-flex items-center text-center px-2 text-white font-medium">
                             Documentos do Processo
                        </div>
                    </span>
                </a>
                <a href="{% url 'processes_update_documents' pk=object.pk %}" class=" w-60 m-2 rounded-md bg-slate-500 hover:bg-slate-600 text-white hover:text-gray-200 font-bold btn px-2 ml-2 mr-2 transition-transform duration-300 hover:scale-105">
                    <span class="w-full flex  px-2 text-sm text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                          <path d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625Z" />
                          <path d="M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z" />
                        </svg>
                        <div class="flex justify-center w-full inline-flex items-center text-center px-2 text-white font-medium">
                             Documentos das Partes
                        </div>
                    </span>
                </a>
                <a class="w-60 m-2 rounded-md bg-slate-500 hover:bg-slate-600 text-white hover:text-gray-200 font-bold btn px-2 ml-2 mr-2 transition-transform duration-300 hover:scale-105" onclick="toggleModalNotes()">
                    <span class="w-full flex items-center justify-center items-center px-2 text-sm text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                            <path d="M5.85 3.5a.75.75 0 0 0-1.117-1 9.719 9.719 0 0 0-2.348 4.876.75.75 0 0 0 1.479.248A8.219 8.219 0 0 1 5.85 3.5ZM19.267 2.5a.75.75 0 1 0-1.118 1 8.22 8.22 0 0 1 1.987 4.124.75.75 0 0 0 1.48-.248A9.72 9.72 0 0 0 19.266 2.5Z" />
                            <path fill-rule="evenodd" d="M12 2.25A6.75 6.75 0 0 0 5.25 9v.75a8.217 8.217 0 0 1-2.119 5.52.75.75 0 0 0 .298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 1 0 7.48 0 24.583 24.583 0 0 0 4.83-1.244.75.75 0 0 0 .298-1.205 8.217 8.217 0 0 1-2.118-5.52V9A6.75 6.75 0 0 0 12 2.25ZM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 0 0 4.496 0l.002.1a2.25 2.25 0 1 1-4.5 0Z" clip-rule="evenodd" />
                        </svg>
                        <div class="w-full inline-flex items-center text-center px-2 text-white font-medium">
                            Adicionar Lembrete
                        </div>
                    </span>
                </a>
            </div>
            <div class="border-t-2 border-slate-400 mt-2 mr-2">
                <a class="w-60 m-2 rounded-md bg-slate-500 hover:bg-slate-600 text-white hover:text-gray-200 font-bold btn px-2 ml-2 mr-2 transition-transform duration-300 hover:scale-105" onclick="toggleModalGenerateDocument()">
                    Gerar Documentos
                </a>
            </div>
            <input type="hidden" name="save_process" value="save_process">
            <a href="{% url 'processes_list' %}" class="m-2 mt-4 font-md rounded-md bg-blue-500 hover:bg-blue-600 text-white hover:text-gray-200 font-bold btn px-4 py-1 ml-2 mr-2 transition-transform duration-300 hover:scale-105">
                  Voltar
            </a>
            <input type="submit" value="Salvar" class="m-2 mt-4 font-md rounded-md bg-green-500 hover:bg-green-600 text-white hover:text-gray-200 font-bold btn px-4 py-1 ml-2 mr-2 transition-transform duration-300 hover:scale-105">
         </form>
      </div>
   </div>
</div>
<!-- Modal Background -->
<div id="modal" class=" sm:ml-36 fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center hidden">
    <div class="bg-white rounded-lg shadow-lg p-6 w-3/4">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-bold text-blue-800">Confirmar Cadastro</h2>
            <button class="text-gray-500 hover:text-gray-700" onclick="toggleModal()">&times;</button>
        </div>

        <!-- Modal content with form -->
        <form method="POST" action="{% url 'processes_update' pk=object.pk %}" enctype="multipart/form-data" class="m-2 w-full">
            {% csrf_token %}
            <!-- Dados Pessoais -->
            <div class="mr-2 rounded-lg">
                <div class="flex w-full rounded-lg">
                    <span class="w-full h-6 inline-flex items-center text-sm text-blue-400 border-b-2 border-blue-500">
                      <label class="text-blue-400 font-bold">DADOS PESSOAIS DO REQUERIDO:</label>
                    </span>
                </div>
                <div class="w-full flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Requerido:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold ml-2">Grau de Parentesco:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6 border-2 border-slate-200 rounded-md px-2 flex items-center">{{object.id_assisted}}</div>
                        <div class="w-full h-6 ml-2">{{requireds_form.kin}}</div>
                    </div>
                </div>

                <div class="w-full flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Nome:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{requireds_form.name}}</div>
                    </div>
                </div>
                <div class="w-full flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Estado civil:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                            <label class="text-slate-600 font-bold">RG:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600  ml-2">
                            <label class="text-slate-600 font-bold">Orgão Expedidor:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{requireds_form.status_civil}}</div>
                        <div class="w-full h-6 ml-2">{{requireds_form.rg}}</div>
                        <div class="w-full h-6 ml-2">{{requireds_form.organ}}</div>
                    </div>
                </div>
                <div class="w-full flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">NIT:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                            <label class="text-slate-600 font-bold">CPF:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600  ml-2">
                            <label class="text-slate-600 font-bold">E-mail:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{requireds_form.nit}}</div>
                        <div class="w-full h-6 ml-2">{{requireds_form.cpf}}</div>
                        <div class="w-full h-6 ml-2">{{requireds_form.email}}</div>
                    </div>
                </div>
                <div class="w-full flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Data de Expedição:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                            <label class="text-slate-600 font-bold">Data de Nascimento:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{requireds_form.date_expedition}}</div>
                        <div class="w-full h-6 ml-2">{{requireds_form.date_birth}}</div>
                    </div>
                </div>
                <div class="w-full flex flex-col items-center">
                    <div class="flex container-fluid w-full items-center">
                        <span class="w-full h-6 flex items-center text-sm text-gray-600">
                            <label class="text-slate-600 font-bold">Telefone Principal:</label>
                        </span>
                        <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                            <label class="text-slate-600 font-bold">Telefone Secundário:</label>
                        </span>
                    </div>
                    <div class="container-fluid flex w-full items-center">
                        <div class="w-full h-6">{{requireds_form.fone_1}}</div>
                        <div class="w-full h-6 ml-2">{{requireds_form.fone_2}}</div>
                    </div>
                </div>
                <div class="mt-1">
                    <div class="flex w-full rounded-lg">
                        <span class="w-full h-6 inline-flex items-center text-sm text-blue-400 border-b-2 border-blue-500">
                          <label class="text-blue-400 font-bold">ENDEREÇO:</label>
                        </span>
                    </div>
                    <div class="w-full flex flex-col items-center">
                        <div class="flex container-fluid w-full items-center">
                            <span class="w-full h-6 flex items-center text-sm text-gray-600">
                                <label class="text-slate-600 font-bold">Endereço:</label>
                            </span>
                            <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                                <label class="text-slate-600 font-bold">Bairro:</label>
                            </span>
                        </div>
                        <div class="container-fluid flex w-full items-center">
                            <div class="w-full h-6">{{requireds_form.address}}</div>
                            <div class="w-full h-6 ml-2">{{requireds_form.district}}</div>
                        </div>
                    </div>
                    <div class="w-full flex flex-col items-center">
                        <div class="flex container-fluid w-full items-center">
                            <span class="w-full h-6 flex items-center text-sm text-gray-600">
                                <label class="text-slate-600 font-bold">Cidade:</label>
                            </span>
                            <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                                <label class="text-slate-600 font-bold">UF:</label>
                            </span>
                        </div>
                        <div class="container-fluid flex w-full items-center">
                            <div class="w-full h-6">{{requireds_form.city}}</div>
                            <div class="w-full h-6 ml-2">{{requireds_form.uf}}</div>
                        </div>
                    </div>
                </div>
                <div class="mt-1">
                    <div class="flex w-full rounded-lg">
                        <span class="w-full h-6 inline-flex items-center text-sm text-blue-400 border-b-2 border-blue-500">
                          <label class="text-blue-400 font-bold">RENDIMENTOS:</label>
                        </span>
                    </div>
                    <div class="w-full flex flex-col items-center">
                        <div class="flex container-fluid w-full items-center">
                            <span class="w-full h-6 flex items-center text-sm text-gray-600">
                                <label class="text-slate-600 font-bold">Empregado:</label>
                            </span>
                            <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                                <label class="text-slate-600 font-bold">Salário:</label>
                            </span>
                            <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                                <label class="text-slate-600 font-bold">Outros Rendimentos:</label>
                            </span>
                        </div>
                        <div class="container-fluid flex w-full items-center">
                            <div class="w-full h-6">{{requireds_form.employee}}</div>
                            <div class="w-full h-6 ml-2">{{requireds_form.salary}}</div>
                            <div class="w-full h-6 ml-2">{{requireds_form.other_income}}</div>
                        </div>
                    </div>
                </div>
                <div class="mt-1">
                    <div class="flex w-full rounded-lg">
                        <span class="w-full h-6 inline-flex items-center text-sm text-blue-400 border-b-2 border-blue-500">
                          <label class="text-blue-400 font-bold">OUTROS:</label>
                        </span>
                    </div>
                    <div class="w-full flex flex-col items-center">
                        <div class="flex container-fluid w-full items-center">
                            <span class="w-full h-6 flex items-center text-sm text-gray-600">
                                <label class="text-slate-600 font-bold">Nº de Dependentes:</label>
                            </span>
                            <span class="w-full h-6 flex items-center text-sm text-gray-600 ml-2">
                                <label class="text-slate-600 font-bold">Moradia:</label>
                            </span>
                        </div>
                        <div class="container-fluid flex w-full items-center">
                            <div class="w-full h-6">{{requireds_form.dependents}}</div>
                            <div class="w-full h-6 ml-2">{{requireds_form.house}}</div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="flex justify-end">
                {{requireds_form.id_assisted}}
                <input type="hidden" name="add_required" value="{{object.id_assisted}}">
                <button type="button" class="m-2 font-md rounded-md bg-blue-500 hover:bg-blue-600 text-white hover:text-gray-200 font-bold btn px-4 py-1" onclick="toggleModal()">Voltar</button>
                <input type="submit" value="Adicionar" class="m-2 font-md rounded-md bg-green-500 hover:bg-green-600 text-white hover:text-gray-200 font-bold btn px-4 py-1">
            </div>
        </form>
    </div>
</div>

<div id="modal_notes" class=" sm:ml-36 fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center hidden">
    <div class="bg-white rounded-lg shadow-lg p-6 w-3/4">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-bold text-blue-800">Adicionar Lembrete</h2>
            <button class="text-gray-500 hover:text-gray-700" onclick="toggleModalNotes()">&times;</button>
        </div>

        <!-- Modal content with form -->
        <form method="POST" action="{% url 'processes_update' pk=object.pk %}" enctype="multipart/form-data" class="m-2 w-full">
           {% csrf_token %}
           <!-- <label for="website-admin" class="w-full block mb-1 text-sm font-medium text-blue-800">Nome</label> -->
            <div class="border-2 border-blue-800 mr-2 rounded-lg">
                <div class="flex w-full rounded-lg">
                    <span class="w-full inline-flex items-center px-3 py-1 text-sm text-gray-900 bg-blue-800 border border-e-0 border-gray-300 rounded-t-lg">
                      <label class="text-white font-bold">Preencha os dados da Nota:</label>
                    </span>
                </div>
                <div class="flex w-full py-1 px-2 mt-2">
                    <span class="w-2/12 inline-flex items-center px-3 py-1 text-sm text-gray-900 bg-blue-400 border border-e-0 border-gray-300 rounded-s-md ">
                        <label class="text-white font-bold">DATA DE ATENDIMENTO</label>
                    </span>
                    <!-- Campo visível somente leitura -->
                    <input class="px-1 rounded-none rounded-e-lg bg-gray-50 border border-blue-800 text-gray-900 focus:ring-blue-500 focus:border-blue-500 block flex-1 text-sm mr-2" value="{{ form.date_at.value }}" readonly>
                    <!-- Campo oculto que envia o valor de volta no POST -->
                    <input type="hidden" name="date_at" value="{{ form.date_at.value|date:'Y-m-d' }}">
                </div>
                <div class="flex w-full  px-2 ">
                    <span class="w-2/12 inline-flex items-center px-3  text-sm text-gray-900 bg-blue-400 border border-e-0 border-gray-300 rounded-s-md">
                      <label class="text-white font-bold">Usuário:</label>
                    </span>
                    {{form_notes.user}}
                </div>
                <div class="flex w-full  py-1 px-2">
                    <span class="w-2/12 inline-flex items-center px-3  text-sm text-gray-900 bg-blue-400 border border-e-0 border-gray-300 rounded-s-md">
                      <label class="text-white font-bold">Prioridade:</label>
                    </span>
                    {{form_notes.priority}}
                </div>
                <div class="flex w-full  py-1 px-2">
                    <span class="w-2/12 inline-flex items-center px-3  text-sm text-gray-900 bg-blue-400 border border-e-0 border-gray-300 rounded-s-md">
                      <label class="text-white font-bold">Assunto:</label>
                    </span>
                    {{form_notes.subject}}
                </div>
                <div class="flex w-full  py-1 px-2">
                    <span class="w-2/12 inline-flex items-center px-3  text-sm text-gray-900 bg-blue-400 border border-e-0 border-gray-300 rounded-s-md">
                      <label class="text-white font-bold">Descrição:</label>
                    </span>
                    {{form_notes.note}}
                </div>
                <div class="flex w-full  py-1 px-2">
                    <span class="w-2/12 inline-flex items-center px-3  text-sm text-gray-900 bg-blue-400 border border-e-0 border-gray-300 rounded-s-md">
                      <label class="text-white font-bold">Data do lembrete:</label>
                    </span>
                    {{form_notes.date_at}}
                    <span class="w-2/12 inline-flex items-center px-3  text-sm text-gray-900 bg-blue-400 border border-e-0 border-gray-300 rounded-s-md">
                      <label class="text-white font-bold">Horário:</label>
                    </span>
                    {{form_notes.time_at}}
                </div>
            </div>
            <div class="flex justify-end">
                <input type="hidden" name="add_note" value="True">
                <input type="hidden" name="id_process" value="{{object.pk}}">
                <button type="button" class="m-2 font-md rounded-md bg-blue-500 hover:bg-blue-600 text-white hover:text-gray-200 font-bold btn px-4 py-1" onclick="toggleModalNotes()">Voltar</button>
                <input type="submit" value="Adicionar" class="m-2 font-md rounded-md bg-green-500 hover:bg-green-600 text-white hover:text-gray-200 font-bold btn px-4 py-1">
            </div>
        </form>
    </div>
</div>

<div id="modal_notes_info" class=" sm:ml-36 fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center hidden">
    <div class="bg-white rounded-lg shadow-lg p-6 w-3/4">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-bold text-blue-800">Adicionar Lembrete</h2>
            <button class="text-gray-500 hover:text-gray-700" onclick="toggleModalNotesInfo()">&times;</button>
        </div>

        <!-- Modal content with form -->
        <form method="POST" action="{% url 'processes_update' pk=object.pk %}" enctype="multipart/form-data" class="w-full">
           {% csrf_token %}
           <!-- <label for="website-admin" class="w-full block mb-1 text-sm font-medium text-blue-800">Nome</label> -->
            <div class="container-fluid rounded-lg">
                {% for note in note_waring %}

                <div class=" border-2 border-slate-400 text-slate-800 rounded-md mb-2">
                    <div class="w-full bg-red-500 text-white font-medium rounded-t-md px-2">
                        <label>Lembrete: {{note.pk}}</label>
                    </div>
                    <div class="container-fluid flex">
                        <div class="w-10/12 mt-2 mb-2">
                            <h1 class="text-slate-800 font-medium">
                                <label class="">Usuário: {{note.user}}</label>
                            </h1>
                            <h1 class="text-slate-800 font-medium">
                                <label class="">Assunto: {{note.subject}}</label>
                            </h1>
                            <div class="text-slate-800 font-medium">
                                Nota: {{note.note|truncatechars:80 }}
                            </div>
                            <h1 class="text-slate-800 font-medium mb-2">
                                <label class="">Data e Hora: {{note.date_at}} / {{note.time_at}}</label>
                            </h1>
                        </div>
                        <button type="submit" name="note_id" value="{{note.pk}}" class="w-2/12 mt-2 mb-2 flex inline-flex items-center justify-center bg-green-500 hover:bg-green-600  px-2 py-1  text-white font-bold rounded transition-transform duration-300 hover:scale-105">
                            Finalizar
                        </button>
                    </div>
                </div>
                {%endfor%}
            </div>
            <div class="flex justify-end">
                <input type="hidden" name="note_pk" value="{{object.pk}}">
                <button type="button" class="m-2 font-md rounded-md bg-blue-500 hover:bg-blue-600 text-white hover:text-gray-200 font-bold btn px-4 py-1" onclick="toggleModalNotesInfo()">Voltar</button>
                <!-- <input type="submit" value="Adicionar" class="m-2 font-md rounded-md bg-green-500 hover:bg-green-600 text-white hover:text-gray-200 font-bold btn px-4 py-1"> -->
            </div>
        </form>
    </div>
</div>

<div id="modal_generate_document" class=" sm:ml-36 fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center hidden">
    <div class="bg-white rounded-lg shadow-lg p-6 w-3/4">
        <div class="flex  items-center mb-1 border-b-2 border-slate-400 ">
            <h2 class="text-lg font-bold text-blue-800">Gerar Documentos</h2>
            <button class="text-gray-500 hover:text-gray-700" onclick="toggleModalGenerateDocument()">&times;</button>
        </div>
        <div class=" flex">
        <!-- Modal content with form -->
            <form method="POST" action="{% url 'processes_update' pk=object.pk %}" enctype="multipart/form-data" class="">
               {% csrf_token %}
               <!-- <label for="website-admin" class="w-full block mb-1 text-sm font-medium text-blue-800">Nome</label> -->
                <div class="container-fluid rounded-lg">
                    <div class="mt-4 ">
                        <input type="hidden" name="document_procuracao" value="document_procuracao">
                        <input type="submit" value="Gerar Procução" class="w-60 flex justify-center rounded-md bg-slate-500 hover:bg-slate-600 text-white hover:text-gray-200 font-bold btn px-2 transition-transform duration-300 hover:scale-105">
                    </div>
                </div>
            </form>
            <form method="POST" action="{% url 'processes_update' pk=object.pk %}" enctype="multipart/form-data" class="">
               {% csrf_token %}
               <!-- <label for="website-admin" class="w-full block mb-1 text-sm font-medium text-blue-800">Nome</label> -->
                <div class="container-fluid rounded-lg">
                    <div class="mt-4 ">
                        <input type="hidden" name="document_hiposuficiencia" value="document_hiposuficiencia">
                        <input type="submit" value="Gerar Hiposuficiência" class="w-60 flex justify-center rounded-md bg-slate-500 hover:bg-slate-600 text-white hover:text-gray-200 font-bold btn px-2 transition-transform duration-300 hover:scale-105">
                    </div>
                </div>
            </form>
        </div>
        <div class="flex justify-end">
            <button type="button" class="m-2 font-md rounded-md bg-blue-500 hover:bg-blue-600 text-white hover:text-gray-200 font-bold btn px-4 py-1" onclick="toggleModalGenerateDocument()">Fechar</button>
            <!-- <input type="submit" value="Adicionar" class="m-2 font-md rounded-md bg-green-500 hover:bg-green-600 text-white hover:text-gray-200 font-bold btn px-4 py-1"> -->
        </div>
    </div>
</div>

<script>
function toggleModal() {
    var modal = document.getElementById("modal");
    modal.classList.toggle("hidden");
}
</script>

<script>
function toggleModalNotes() {
    var modal = document.getElementById("modal_notes");
    modal.classList.toggle("hidden");
}
</script>

<script>
function toggleModalNotesInfo() {
    var modal = document.getElementById("modal_notes_info");
    modal.classList.toggle("hidden");
}
</script>

<script>
function toggleModalGenerateDocument() {
    var modal = document.getElementById("modal_generate_document");
    modal.classList.toggle("hidden");
}
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
    var categories = {{ categories|safe }}; // Carrega o mapeamento das categorias e subcategorias do contexto do Django

    // Ao mudar a categoria
    $('#select-category').change(function() {
        var selectedCategory = $(this).val();
        var subcategories = categories[selectedCategory] || [];

        // Limpar e popular o select de subcategorias
        $('#select-subcategory').empty().append('<option value="">Selecione</option>');
        $.each(subcategories, function(index, action) {
            $('#select-subcategory').append('<option value="' + action[0] + '">' + action[0] + '</option>');
        });

        // Limpar o terceiro select
        $('#select-subcategory2').empty().append('<option value="">Selecione</option>');
    });

    // Ao mudar a subcategoria
    $('#select-subcategory').change(function() {
        var selectedCategory = $('#select-category').val();
        var selectedSubcategory = $(this).val();
        var actions = categories[selectedCategory].find(sub => sub[0] === selectedSubcategory) || [];

        // Limpar e popular o select de ações
        $('#select-subcategory2').empty().append('<option value="">Selecione</option>');
        if (actions.length > 0) {
            // Adicionando a ação encontrada no array de ações
            $('#select-subcategory2').append('<option value="' + actions[0][0] + '">' + actions[0][0] + '</option>');
        }
    });
});
</script>


{% endblock %}